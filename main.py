import streamlit as st
import os

# ุชูุธูุงุช ุงุตู ูพูุฌุฑู
st.set_page_config(page_title="ุณุงูุงูู ููุดููุฏ ุนุงุดูุฑุง", layout="wide", page_icon="๐ก๏ธ")

# ุชุฒุฑู ูููุช ู ุงุณุชุงู ุฑุงุณุชโฺู (RTL)
st.markdown("""
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap');
    html, body, [class*="css"] {
        font-family: 'Vazirmatn', sans-serif;
        direction: rtl;
        text-align: right;
    }
    .stTextArea textarea {
        direction: rtl;
    }
    </style>
    """, unsafe_allow_html=True)

# ฑ. ุทุฑุงุญ ููู ฺฉูุงุฑ (ุณุงุฏุจุงุฑ) ู ููุงุด ููฺฏู ุดูุง
with st.sidebar:
    # ููุงุด ููฺฏู (ุงุณู ูุงู ุดูุง ุจุง ุฏูุช ูุงุฑุฏ ุดุฏู)
    logo_path = "ChatGPT Image Dec 27, 2025, 03_01_00 PM.png"
    if os.path.exists(logo_path):
        st.image(logo_path, use_container_width=True)
    
    st.title("โ๏ธ ูุฒ ูุฏุฑุช")
    st.write("---")
    
    unit = st.selectbox("๐ฏ ุงูุชุฎุงุจ ูุงุญุฏ ูุฑุจูุทู:", 
                        ["ูู ู ูููุฏุณ", "HSSE ู ุงูู", "ุงููุฑ ูุงู ู ุงุฏุงุฑ", "ูุงุดูโุขูุงุช"])
    
    output_type = st.radio("๐ฌ ูุงูุจ ูุญุชูุง:", 
                           ["ุณูุงุฑู ูุฏู", "ูพุงุฏฺฉุณุช ุขููุฒุด", "ุจุฑูุดูุฑ ฺุงูพ"])
    
    st.divider()
    st.success("ูุณุฎู ฒ.ฐ ูุนุงู ุงุณุช")

# ฒ. ุจุฏูู ุงุตู ุณุงุช ู ููุงุด ุชุตูุฑ ูพุฑูฺู (ูุงู TIF)
st.title("๐ก๏ธ ูพูุชูุฑู ุจุงุฒุขูุฑู ุฏุงูุด ููุดููุฏ - ููุณุณู ุนุงุดูุฑุง")

# ููุงุด ุนฺฉุณ ูพุฑูฺู ุดูุง ุฏุฑ ุจุงูุง ุตูุญู (ฺฉุงูุฑ)
project_img = "Picture1.tif"
if os.path.exists(project_img):
    st.image(project_img, caption="ุชุตูุฑ ุงุฒ ูพุฑูฺูโูุง ููุณุณู", use_container_width=True)
else:
    st.warning("โ๏ธ ุชุตูุฑ ฺฉุงูุฑ ูพุฏุง ูุดุฏ. ูุงู ูุงู ุฑุง ุฏุฑ ฺฏุชโูุงุจ ฺฺฉ ฺฉูุฏ.")

st.write("---")

# ณ. ุณุชููโุจูุฏ ุจุฑุง ูุฑูุฏ ู ุฎุฑูุฌ
col1, col2 = st.columns([1.2, 1])

with col1:
    st.subheader("๐ ุดุฑุญ ูุณุฆูู ุง ฺุงูุด ูู")
    subject = st.text_area("ูุทูุงู ุฌุฒุฆุงุช ุฑุง ุงูุฌุง ูุงุฑุฏ ฺฉูุฏ (ูุซูุงู: ฺุงูุด ุญูุงุฑ ุฏุฑ ุฒููโูุง ุฑุฒุด):", height=200)
    generate = st.button("๐ ูููุฏุณ ู ุชููุฏ ุณูุงุฑู")

with col2:
    st.subheader("๐ก ุฎุฑูุฌ ูพุดููุงุฏ ุณุณุชู")
    if generate:
        if subject:
            with st.spinner('ุฏุฑ ุญุงู ุชุทุจู ุจุง ุงุณุชุงูุฏุงุฑุฏูุง ูุธุงู ูู ู ุงุฌุฑุง...'):
                # ุงู ุชฺฉู ุฎุฑูุฌ ููุงุด ูุณุช ฺฉู ุณุงุชุช ูพุฑ ุจุดู
                st.success(f"ุชุญูู ุจุฎุด {unit} ุจุง ููููุช ุงูุฌุงู ุดุฏ.")
                st.markdown(f"""
                **ุฎุฑูุฌ ูุชูุงุณุจ ุจุง `{output_type}`:**
                
                ฑ. **ุชุชุฑ ุงุตู:** ุฑุงูฺฉุงุฑ ููุงุจูู ุจุง {subject}  
                ฒ. **ุณุงุฎุชุงุฑ ูพุดููุงุฏ:** ูฺฉุฑููุฑููฺฏ ณ ุฏูููโุง (ฺฉูุชุงู ู ุงุซุฑฺฏุฐุงุฑ)  
                ณ. **ูฺฉุชู ฺฉูุฏ:** ููุงุด ุงูุญุฑุงู ูุนุงุฑ ุงุฌุฑุง ูุณุจุช ุจู ูุดุฑู ตฐฐ ุฏุฑ ุชุตูุฑ  
                
                ---
                โจ ุงู ุณูุงุฑู ุจู ุตูุฑุช ููุดููุฏ ุจุฑุง ุงูพูฺฉุดู ุณุงุฒูุงู ุขูุงุฏู ุดุฏู ุงุณุช.
                """)
                st.balloons() # ุฌุดู ูพุฑูุฒ ุณุงุช!
        else:
            st.error("ุญุงุฌ ููุฏ ุฑู ูพุฑ ูฺฉุฑุฏ ฺฉู!")

# ด. ููุชุฑ ุง ูพุงูุฑู ุดฺฉ
st.divider()
st.markdown("<p style='text-align: center; color: #888;'>ุชูุงู ุญููู ุจุฑุง ูุงุญุฏ ูุฏุฑุช ุจุฑูุงููโุฑุฒ ูุญููุธ ุงุณุช</p>", unsafe_allow_html=True)
